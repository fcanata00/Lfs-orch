# ===========================================================
# Porg - Global Configuration File (/etc/porg/porg.conf)
# ===========================================================
# This file defines all global behavior for the Porg builder,
# dependency resolver, logging system, and LFS bootstrap mode.
# Every Porg module (builder, logger, deps, revdep, etc.)
# must source and follow these variables.
# ===========================================================

# ----------------------
# General
# ----------------------
PO_VERSION="1.0.0"
PO_SYSTEM_NAME="Porg Linux"

# Where all work will be done (sources, builds, logs, cache)
WORKDIR="/var/tmp/porg/work"
CACHE_DIR="${WORKDIR}/cache"
LOG_DIR="/var/log/porg/builds"
PKG_DIR="/var/cache/porg/packages"
HOOK_DIR="/etc/porg/hooks"
PORTS_DIR="/usr/ports"

# Default destination (used for normal system builds)
DESTDIR="/"
# Destination for bootstrap and toolchain builds (LFS)
LFS_MOUNT="/mnt/lfs"

# ----------------------
# Build Options
# ----------------------
JOBS="$(nproc 2>/dev/null || echo 1)"
CHROOT_METHOD="bwrap"          # bwrap | chroot | none
FAKEROOT_BIN="/usr/bin/fakeroot"
USE_STRIP="true"               # strip binaries after build
PACKAGE_FORMAT="tar.zst"       # tar.zst | tar.xz | tar.gz
VERIFY_GPG="false"             # verify GPG signatures if available
STRICT_GPG="false"             # fail if GPG signature missing

# ----------------------
# Logging
# ----------------------
VERBOSE="true"
LOG_COLOR="true"
QUIET_MODE="false"
SHOW_PROGRESS="true"
PROGRESS_REFRESH=1             # seconds between progress updates
PROGRESS_STYLE="portage"       # portage | minimal

# ----------------------
# Bootstrap and Toolchain
# ----------------------
BOOTSTRAP_MODE="auto"          # auto | always | never
BOOTSTRAP_DESTDIR="${LFS_MOUNT}"
BOOTSTRAP_PATH="${LFS_MOUNT}/tools/bin:/usr/bin:/bin"
BOOTSTRAP_CC="gcc"
BOOTSTRAP_CXX="g++"
BOOTSTRAP_FLAGS="-O2 -pipe"

# ----------------------
# Git Repository Sync
# ----------------------
REPO_SYNC_ENABLED="true"
REPO_SYNC_URL="https://github.com/yourname/porg-ports.git"
REPO_SYNC_BRANCH="main"
REPO_SYNC_INTERVAL="86400"     # seconds (24h)
REPO_SYNC_LOCAL="${PORTS_DIR}"

# ----------------------
# Fallback Mirrors
# ----------------------
MIRRORS=(
  "https://ftp.gnu.org/gnu"
  "https://mirrors.kernel.org/gnu"
  "https://distfiles.gentoo.org/distfiles"
)

# ----------------------
# Hook and Patch Behavior
# ----------------------
RUN_GLOBAL_HOOKS="true"
HOOK_PRIORITY_ORDER=(pre-download post-download pre-build post-build pre-install post-install pre-strip post-strip pre-expand-root post-expand-root)
PATCH_SEARCH_PATHS=(
  "/usr/ports/base"
  "/usr/ports/extra"
  "/etc/porg/patches"
)

# ----------------------
# Cleanup Behavior
# ----------------------
CLEAN_AFTER_BUILD="false"
CLEAN_AFTER_PACKAGE="true"
KEEP_LOGS_DAYS=30

# ----------------------
# Advanced
# ----------------------
ALLOW_NETWORK_INSIDE_CHROOT="false"
CHROOT_TIMEOUT=0          # 0 = unlimited
ENABLE_SANDBOX="true"

# ----------------------
# Visual Style (for logs and output)
# ----------------------
COLOR_INFO="\e[1;32m"     # green
COLOR_WARN="\e[1;33m"     # yellow
COLOR_ERROR="\e[1;31m"    # red
COLOR_STAGE="\e[1;36m"    # cyan
COLOR_RESET="\e[0m"

# ----------------------
# End of file
# ----------------------
