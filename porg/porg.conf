#############################################
# PORG - Package Orchestrator Configuration #
# Versão: Final Integrada (LFS / BLFS Ready) #
#############################################

# Diretórios principais
WORKDIR="/var/tmp/porg"
# CACHE_DIR="${WORKDIR}/cache"
LOG_DIR="${WORKDIR}/logs"
PATCH_DIR="${WORKDIR}/patches"
DESTDIR_BASE="${WORKDIR}/destdir"
PKG_OUTPUT_DIR="${WORKDIR}/packages"
PORTS_DIR="/usr/ports"
MODULES_DIR="/usr/lib/porg"
DB_DIR="/var/lib/porg"
STATE_DIR="/var/lib/porg/state"
LOCKFILE="/var/lock/porg.lock"
HOOK_DIR="/etc/porg/hooks"
LFS="/mnt/lfs"
CACHE_DIR="/var/cache/porg/${ARCH:-$(uname -m)}/sources"

# Execução e build
USE_CHROOT=true
CHROOT_METHOD="bwrap"
COPY_RESOLV_CONF=true
JOBS="$(nproc 2>/dev/null || echo 1)"
PKG_FORMAT="tar.zst"
USE_FAKEROOT=true
STRIP_BINARIES=true
STRICT_GPG=false

# Repositório e sincronização
GIT_REPO="https://github.com/seuusuario/porg-ports.git"
GIT_BRANCH="main"
SYNC_ON_START=true
AUTO_UPDATE_PORTS=true

# Logs e aparência
LOG_LEVEL="INFO"
LOG_COLOR=true
CLEAN_OLD_LOGS_DAYS=10
SHOW_CPU_MEM=true
SHOW_PROGRESS=true
QUIET_MODE=false

# Interface TUI (modo gráfico opcional)
TUI_ENABLED=false
TUI_REFRESH_INTERVAL=1
TUI_BAR_COLOR="green"
TUI_CPU_BAR_COLOR="cyan"
TUI_MEM_BAR_COLOR="yellow"

# Banco de dados e auditoria
DB_FILE="${DB_DIR}/porg.db"
DB_BACKUP_ON_CHANGE=true
ENABLE_AUDIT=true
AUTO_FIX_PROBLEMS=true
AUDIT_VULN_SOURCES=(
  "https://security-tracker.debian.org/tracker/data/json"
  "https://nvd.nist.gov/feeds/json/cve/1.1/"
)
AUTO_DEP_CLEAN=true
RESOLVE_PARALLEL=true

# Módulos principais
PORG_LOGGER="${MODULES_DIR}/porg_logger.sh"
PORG_DB="${MODULES_DIR}/porg_db.sh"
PORG_DEPS="${MODULES_DIR}/porg_deps.py"
PORG_REMOVE="${MODULES_DIR}/porg_remove.sh"
PORG_RESOLVE="${MODULES_DIR}/porg_resolve.sh"
PORG_UPGRADE="${MODULES_DIR}/porg_upgrade.sh"
PORG_AUDIT="${MODULES_DIR}/porg_audit.sh"
PORG_BUILDER="${MODULES_DIR}/porg_builder.sh"
PORG_BOOTSTRAP="${MODULES_DIR}/porg_bootstrap.sh"
PORG_CROSSGEN="${MODULES_DIR}/porg_crossgen.sh"
PORG_ISO="${MODULES_DIR}/porg_iso.sh"

# Extra: comportamento global
AUTO_CONFIRM=true
ALLOW_UPGRADE=true
BACKUP_BEFORE_UPGRADE=true
SESSION_LOG_BASE="${LOG_DIR}/session"
PARALLEL_N="${JOBS}"
